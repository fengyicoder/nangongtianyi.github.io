---
title: '论文阅读-ShuffleNet V2: Practical Guidelines for Efficient CNN Architecture Design'
date: 2018-12-08 15:43:30
categories:
    - 论文
---


# 研究问题：
进一步对模型进行精简，使其在移动端也具有良好的运行速度
<!-- more -->
# 亮点
从目的出发找到设计原则，在设计原则的指导下来设计网络

# 相关信息
1. 网络想要在移动端运行，则需要较低的运算复杂性，其衡量标准为浮点运算操作的数量，即FLOPs，目前大多数的网络都是通过组卷积与深度可分离卷积来降低FLOPs。
2. 经过实验发现，降低了FLOPs，并不意味着网络的速度增加，FLOPs只是衡量速度的间接标准，我们需要找到衡量速度的直接标准。论文中经过实验发现，速度与内存访问成本（MAC）与网络的并行化程度有关。

# 实验与结论
1. 卷积层的输入输出通道相等时，MAC最小。
使用h与w代表输出特征图的尺寸，$c_1$ 与$c_2$代表输入与输出的通道数，则卷积层的FLOPs计算如下：$B = hw{c_1}{c_2}$，而对于MAC，对于1*1卷积，由于输入与输出特征图尺寸相同，所以有：${\rm MAC = }hw({c_1} + {c_2}) + {c_1}{c_2}$，由均值不等式，这里可以得到$hw({c_1} + {c_2}) + {c_1}{c_2} \ge 2hw\sqrt {c_1c_2}  + {c_1}{c_2}$，将B代入可得：
${\rm MAC}\ge{\rm2}\sqrt{hwB} + B/hw$，显然，等通道数相等时才能取得最小值。
2. 过多的组卷积操作会增加MAC，使得速度变慢。
对于1*1卷积来说，g代表组数，当使用了组卷积之后，B变为$B = hw{c_1}{c_2}/g$，MAC变为${\rm MAC=}hw({c_1} + {c_2}) + {c_1}{c_2}/g$，此时有：
$$\begin{array}{c}
MAC = hw({c_1} + {c_2}) + {c_1}{c_2}/g\\
 = hw{c_1} + \frac{(Bg)}{(c_1)} + \frac{B}{(hw)}
\end{array}$$

显然，当B不变时，增大g会增大MAC
3. 模型中的分支数量越少，模型的速度越快
4. element-wise操作对速度影响非常大。

# 网络设计
![网络结构](/img/shufflev2.png)
论文做了一个简单的操作，即通道分割，简单起见，假设分为两组，这里满足第三条原则；其中一组不做任何操作，满足第三条原则；一组进行深度可分离卷积，注意，这里保证输入输出通道不变，以满足第一条原则；组合的时候使用通道的组合，而不是相加，满足第四条原则。
与shufflenetv1相比，下采样的操作多了一个1*1的卷积来混合特征。
